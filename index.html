<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>è‡´é’æ˜¥ - Enhanced 3Dç›¸å†Œ</title>
    <style>
        /* åŸºç¡€æ ·å¼é‡ç½® */
        *{margin: 0;padding: 0;}
        html,body{height: 100%;}
        
        /* ä¸»ä½“æ ·å¼ - è®¾ç½®3Dç©ºé—´å’ŒèƒŒæ™¯ */
        body{
            display: flex;
            perspective: 1000px; /* è®¾ç½®3Dè§†è§’æ·±åº¦ */
            transform-style: preserve-3d; /* ä¿ç•™3Då˜æ¢æ•ˆæœ */
            background-color: #111;
            background-image: url(images/star.jpg);
            background-size: cover;
            background-position: center;
            height:100%;
            width: 100%;
            overflow: hidden;
            transition: perspective 0.5s ease-out; /* è§†è§’å˜åŒ–åŠ¨ç”» */
            font-family: 'Arial', sans-serif;
            /* æ·»åŠ å¾„å‘æ¸å˜èƒŒæ™¯å¢å¼ºæ•ˆæœ */
            background-image: radial-gradient(circle at center, rgba(30,30,60,0.6) 0%, rgba(10,10,25,0.8) 70%), url(images/star.jpg);
        }
        
        /* æ§åˆ¶é¢æ¿æ ·å¼ */
        #controls {
            position: fixed;
            bottom: 20px;
            right: 20px; /* æ”¹ä¸ºå³ä¾§ */
            z-index: 100;
            display: flex;
            flex-direction: column; /* æ”¹ä¸ºå‚ç›´æ’åˆ— */
            gap: 15px;
            background: rgba(0,0,0,0.5);
            padding: 20px 10px; /* è°ƒæ•´å†…è¾¹è·ä»¥é€‚åº”å‚ç›´å¸ƒå±€ */
            border-radius: 30px;
            opacity: 0.4; /* é»˜è®¤åŠé€æ˜ */
            transition: opacity 0.3s;
            backdrop-filter: blur(5px); /* æ¨¡ç³ŠèƒŒæ™¯æ•ˆæœ */
            box-shadow: 0 0 20px rgba(0,0,100,0.3); /* è“è‰²é˜´å½±æ•ˆæœ */
        }
        
        /* æ§åˆ¶é¢æ¿æ‚¬åœæ•ˆæœ */
        #controls:hover {
            opacity: 1; /* æ‚¬åœæ—¶å®Œå…¨ä¸é€æ˜ */
        }
        
        /* æ§åˆ¶æŒ‰é’®æ ·å¼ */
        .control-btn {
            background: none;
            border: none;
            color: white;
            font-size: 16px;
            cursor: pointer;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255,255,255,0.2);
            border-radius: 50%;
            transition: all 0.3s;
        }
        
        /* æ§åˆ¶æŒ‰é’®æ‚¬åœæ•ˆæœ */
        .control-btn:hover {
            background: rgba(255,255,255,0.4);
            transform: scale(1.1);
            box-shadow: 0 0 10px rgba(255,255,255,0.8);
        }
        
        /* ç›¸å†Œä¸»å®¹å™¨ */
        #box{
            position: relative;
            display: flex;
            width: 120px; /* ç…§ç‰‡å®½åº¦ */
            height: 160px; /* ç…§ç‰‡é«˜åº¦ */
            margin: auto;
            transform-style: preserve-3d; /* ä¿ç•™å­å…ƒç´ çš„3Dæ•ˆæœ */
            transform: rotateX(-10deg); /* åˆå§‹å€¾æ–œè§’åº¦ */
            /* Apply entrance animation */
            animation: fadeInAlbum 1.5s 0.5s ease-out forwards; /* duration, delay, timing, fill-mode */
            opacity: 0; /* Initial state for animation, will be overridden by JS if needed but good for CSS-only load */
            --initial-rotate-x: -10deg; /* Store initial rotation for animation */
        }
        
        /* æ¯å±‚ç…§ç‰‡çš„å®¹å™¨ */
        .photo-container {
            position: absolute;
            transform-style: preserve-3d;
            width: 100%;
            height: 100%;
            transition: transform 1s ease-out;
            /* æ·»åŠ CSSå˜é‡å­˜å‚¨åŸå§‹transform */
            --original-transform: '';
        }
        
        /* ä¸ºå¥‡æ•°å’Œå¶æ•°å±‚æ·»åŠ ä¸åŒçš„æ—‹è½¬ç±» */
        .layer-odd {
            animation: rotateCounterClockwise 80s linear infinite;
        }
        
        .layer-even {
            animation: rotateClockwise 80s linear infinite;
        }
        
        /* å®šä¹‰æ—‹è½¬åŠ¨ç”» */
        @keyframes rotateClockwise {
            0% { transform: translateY(var(--layer-y)) rotateY(0deg); }
            100% { transform: translateY(var(--layer-y)) rotateY(360deg); }
        }
        
        @keyframes rotateCounterClockwise {
            0% { transform: translateY(var(--layer-y)) rotateY(360deg); }
            100% { transform: translateY(var(--layer-y)) rotateY(0deg); }
        }
        
        /* å•ä¸ªç…§ç‰‡æ ·å¼ */
        .photo {
            transform-style: preserve-3d;
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            line-height: 150px;
            font-size: 18px;
            color: white;
            text-align: center;
            background-color: #333;
            box-shadow: 0 0 15px rgba(255,255,255,0.3),
                        inset 0 0 10px rgba(0,0,0,0.3); /* å†…å¤–é˜´å½±åˆ›é€ æ·±åº¦æ„Ÿ */
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            backface-visibility: visible; /* ç¡®ä¿èƒŒé¢å¯è§ */
            cursor: pointer;
            overflow: hidden;
            transition: transform 0.4s cubic-bezier(0.2, 1, 0.3, 1), 
                        box-shadow 0.3s ease-out;
            transform-origin: center center; /* å˜æ¢åŸç‚¹å±…ä¸­ */
            /* æ·»åŠ å‘å…‰è¾¹æ¡†æ•ˆæœ */
            box-shadow: 0 0 15px rgba(255,255,255,0.2), 
                        0 0 30px rgba(70,130,255,0.1),
                        inset 0 0 5px rgba(0,0,0,0.4);
        }
        
        /* ç…§ç‰‡æ‚¬åœæ•ˆæœ - ç§»é™¤æ‰€æœ‰ä¼šå¯¼è‡´ä½ç½®å˜åŒ–çš„æ•ˆæœ */
        .photo:hover {
            /* å»é™¤æ‰€æœ‰transform, å°†ç”±JSæ§åˆ¶ */
            box-shadow: 0 0 30px rgba(255,255,255,0.6),
                        0 0 50px rgba(70,130,255,0.3),
                        inset 0 0 5px rgba(0,0,0,0.2);
            z-index: 100;
            filter: brightness(1.2); /* æé«˜äº®åº¦ */
        }

        /* å®Œå…¨ç§»é™¤photo-hoverç±»çš„transform */
        .photo-hover {
            box-shadow: 0 0 30px rgba(255,255,255,0.6),
                        0 0 50px rgba(70,130,255,0.3),
                        inset 0 0 5px rgba(0,0,0,0.2);
            z-index: 100;
            filter: brightness(1.2);
        }

        /* ç…§ç‰‡æ­£é¢å’ŒèƒŒé¢çš„é€šç”¨æ ·å¼ */
        .photo-front, .photo-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden; /* éšè—èƒŒé¢ï¼Œå®ç°ç¿»è½¬æ•ˆæœ */
            border-radius: 8px;
            background-size: cover;
            background-position: center;
            /* æ·»åŠ ç»†å¾®çº¹ç† */
            box-shadow: inset 0 0 0 1px rgba(255,255,255,0.15);
        }

        /* ç…§ç‰‡è¡¨é¢é«˜å…‰æ•ˆæœ */
        .photo-front::after, .photo-back::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(255,255,255,0.15) 0%, rgba(255,255,255,0) 50%);
            border-radius: 8px;
            /* æ·»åŠ è–„è†œæ•ˆæœ */
            box-shadow: inset 0 0 5px rgba(255,255,255,0.1);
        }

        /* ç…§ç‰‡æ­£é¢æ ·å¼ */
        .photo-front {
            z-index: 2;
        }

        /* ç…§ç‰‡èƒŒé¢æ ·å¼ - æ—‹è½¬180åº¦ */
        .photo-back {
            transform: rotateY(180deg);
        }

        /* ç…§ç‰‡æ ‡é¢˜æ ·å¼ */
        .photo-title {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            padding: 10px 5px; /* å¢åŠ ä¸Šä¸‹å†…è¾¹è·ï¼Œç»™å¤šè¡Œæ–‡æœ¬ç•™å‡ºç©ºé—´ */
            margin: 0 0 6px 0; /* åº•éƒ¨å¢åŠ é—´è· */
            text-align: center;
            background: linear-gradient(to bottom, rgba(0,0,0,0.4), rgba(0,0,0,0.8));
            color: white;
            font-size: 14px;
            transform: translateY(100%); /* é»˜è®¤éšè—åœ¨åº•éƒ¨ */
            transition: transform 0.3s ease;
            z-index: 3;
            /* å¢åŠ æ¸å˜å’Œé˜´å½±æ•ˆæœ */
            text-shadow: 0 1px 3px rgba(0,0,0,0.8);
            backdrop-filter: blur(3px);
            border-radius: 0 0 8px 8px; /* ä¿æŒå’Œç…§ç‰‡åº•éƒ¨ä¸€è‡´çš„åœ†è§’ */
            
            /* æ·»åŠ æ–‡æœ¬æ¢è¡Œå’Œæº¢å‡ºå¤„ç† */
            word-wrap: break-word;
            overflow-wrap: break-word;
            white-space: normal; /* å…è®¸æ­£å¸¸æ¢è¡Œ */
            overflow: hidden; /* è¶…å‡ºéƒ¨åˆ†éšè— */
            line-height: 1.4; /* å¢åŠ è¡Œé«˜ä»¥ä¾¿æ›´å¥½åœ°æ˜¾ç¤ºè¡¨æƒ…ç¬¦å· */
            max-height: 4.8em; /* æœ€å¤šæ˜¾ç¤ºçº¦4è¡Œæ–‡æœ¬ */
            box-sizing: border-box; /* ç¡®ä¿å†…è¾¹è·ä¸ä¼šå¢åŠ å…ƒç´ æ€»å®½åº¦ */
        }
        
        /* ç…§ç‰‡æ‚¬åœæ—¶æ ‡é¢˜æ˜¾ç¤ºæ•ˆæœ - å¢åŠ é«˜åº¦ï¼Œç¡®ä¿å¤šè¡Œæ–‡æœ¬å¯è§ */
        .photo:hover .photo-title {
            transform: translateY(0); /* æ˜¾ç¤ºæ ‡é¢˜ */
            max-height: 5em; /* æ‚¬åœæ—¶å…è®¸æ›´å¤šè¡Œæ˜¾ç¤º */
        }

        /* å›¾ç‰‡å…¨å±æ˜¾ç¤ºé®ç½©å±‚ */
        #overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            pointer-events: none; /* é»˜è®¤ä¸æ¥æ”¶é¼ æ ‡äº‹ä»¶ */
            transition: opacity 0.5s ease;
            /* æ·»åŠ æ›´ç²¾ç¾çš„èƒŒæ™¯ */
            background: radial-gradient(circle at center, rgba(20,20,40,0.7) 0%, rgba(0,0,0,0.95) 70%);
            backdrop-filter: blur(5px);
        }
        
        /* æ¿€æ´»é®ç½©å±‚æ ·å¼ */
        #overlay.active {
            opacity: 1;
            pointer-events: auto; /* æ¿€æ´»æ—¶æ¥æ”¶é¼ æ ‡äº‹ä»¶ */
        }
        
        /* å…¨å±æ˜¾ç¤ºçš„å›¾ç‰‡æ ·å¼ */
        #overlay-image {
            max-width: 90%;
            max-height: 90%;
            border-radius: 5px;
            box-shadow: 0 0 30px rgba(255,255,255,0.2);
            /* æ·»åŠ ç¾åŒ–æ•ˆæœ */
            box-shadow: 0 5px 30px rgba(0,0,0,0.6), 0 0 100px rgba(100,150,255,0.2);
            transform: scale(0.95);
            transition: transform 0.3s ease-out;
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        /* å›¾ç‰‡åŠ è½½åŠ¨ç”» */
        #overlay.active #overlay-image {
            transform: scale(1);
        }
        
        /* å…³é—­æŒ‰é’®æ ·å¼ */
        #close-button {
            position: absolute;
            top: 20px;
            right: 20px;
            color: white;
            font-size: 30px;
            cursor: pointer;
            background: none;
            border: none;
            text-shadow: 0 0 10px rgba(0,0,0,0.5);
            opacity: 0.7;
            transition: all 0.3s;
        }
        
        #close-button:hover {
            opacity: 1;
            transform: scale(1.1);
            text-shadow: 0 0 15px rgba(255,255,255,0.8);
        }

        /* åœ°é¢åå°„æ•ˆæœ */
        #reflection {
            position: absolute;
            left: 50%;
            top: 100%;
            width: 1200px;
            height: 1200px;
            background: radial-gradient(ellipse at center, rgba(0,0,0,0.2) 0%, rgba(0,0,0,0) 70%);
            border-radius: 50%;
            transform: rotateX(90deg) translate3d(-50%, 0, -140px) scaleY(1.5); /* å°†åå°„æ—‹è½¬åˆ°æ°´å¹³é¢ */
            opacity: 0.6;
            /* æ·»åŠ æ›´ç²¾ç»†çš„åå°„æ•ˆæœ */
            background: radial-gradient(ellipse at center, 
                        rgba(70,100,180,0.12) 0%, 
                        rgba(30,50,100,0.08) 30%,
                        rgba(0,0,0,0) 70%);
            filter: blur(2px);
        }
        
        /* Keyframes for album title glow animation */
        @keyframes albumTitleGlow {
            0%, 100% {
                text-shadow: 0 0 3px rgba(255, 255, 255, 0.6), /* Inner soft white */
                             0 0 10px rgba(150, 180, 255, 0.5), /* Softer blue */
                             0 0 20px rgba(100, 150, 255, 0.4); /* Wider, more diffuse blue */
                opacity: 0.8;
            }
            50% {
                text-shadow: 0 0 5px rgba(255, 255, 255, 0.8), /* Brighter inner white */
                             0 0 18px rgba(150, 180, 255, 0.7), /* Brighter, slightly larger blue */
                             0 0 35px rgba(100, 150, 255, 0.5); /* Wider, brighter diffuse blue */
                opacity: 0.9;
            }
        }
        
        /* æ·»åŠ ç›¸å†Œæ ‡é¢˜ */
        #album-title {
            position: fixed;
            top: 30px;
            left: 50%;
            transform: translateX(-50%);
            color: white;
            font-size: 22px;
            font-weight: 300;
            letter-spacing: 2px; /* Slightly reduced initial letter spacing for multi-line */
            transition: letter-spacing 0.3s ease-out, opacity 0.3s ease-out; /* Keep transition for these */
            text-align: center;
            line-height: 1.6; /* Slightly increased for multi-line readability */
            width: 100%;
            max-width: 90vw;
            margin: 0 auto;
            animation: albumTitleGlow 5s infinite alternate ease-in-out; /* Apply the animation */
        }
        
        #album-title:hover {
            text-shadow: 0 0 6px rgba(255, 255, 255, 0.9),  /* Stronger inner white on hover */
                         0 0 25px rgba(150, 180, 255, 0.8), /* Stronger blue on hover */
                         0 0 50px rgba(100, 150, 255, 0.7); /* Wider, stronger blue on hover */
            letter-spacing: 3px; /* Adjusted hover letter spacing */
            opacity: 1;
            animation-play-state: paused; /* Pause the animation on hover to show static strong glow */
        }
        
        /* æ·»åŠ ç²’å­åŠ¨ç”»æ•ˆæœ */
        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }
        
        .star {
            position: absolute;
            width: 2px;
            height: 2px;
            background: white;
            border-radius: 50%;
            opacity: 0;
            animation: twinkle 10s infinite;
        }
        
        @keyframes twinkle {
            0% { opacity: 0; }
            50% { opacity: 0.8; }
            100% { opacity: 0; }
        }
        
        /* çˆ±å¿ƒç‰¹æ•ˆæ ·å¼ */
        .heart {
            position: fixed;
            pointer-events: none; /* é˜²æ­¢çˆ±å¿ƒå½±å“é¼ æ ‡äº‹ä»¶ */
            z-index: 999;
            animation: float-heart 1.5s linear forwards;
            transform-origin: center;
            color: #ff6b95;
            text-shadow: 0 0 6px rgba(255, 107, 149, 0.5);
            font-size: 20px;
            font-family: Arial, sans-serif;
        }
        
        /* çˆ±å¿ƒæµ®åŠ¨åŠ¨ç”» */
        @keyframes float-heart {
            0% {
                transform: translate(-50%, -50%) scale(0.3) rotate(0deg);
                opacity: 0.8;
            }
            20% {
                opacity: 0.8;
            }
            100% {
                transform: translate(-50%, -200%) scale(1.2) rotate(40deg);
                opacity: 0;
            }
        }
        
        /* ç»™çˆ±å¿ƒæ·»åŠ å¤šç§é¢œè‰²å˜ä½“ */
        .heart-pink { color: #ff6b95; text-shadow: 0 0 6px rgba(255, 107, 149, 0.5); }
        .heart-purple { color: #cb6bff; text-shadow: 0 0 6px rgba(203, 107, 255, 0.5); }
        .heart-blue { color: #6ba3ff; text-shadow: 0 0 6px rgba(107, 163, 255, 0.5); }
        .heart-cyan { color: #6bffed; text-shadow: 0 0 6px rgba(107, 255, 237, 0.5); }
        .heart-gold { color: #ffcf6b; text-shadow: 0 0 6px rgba(255, 207, 107, 0.5); }

        /* æ·»åŠ æ›´å¤šè§†è§‰ç‰¹æ•ˆçš„CSS */
        /* æ¨±èŠ±é£˜è½æ•ˆæœ */
        .cherry-blossom {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #ffc6d9;
            border-radius: 50% 0 50% 50%;
            transform: rotate(45deg);
            opacity: 0.8;
            pointer-events: none;
            z-index: 2;
            filter: drop-shadow(0 0 2px rgba(255, 198, 217, 0.3));
            animation: fall 10s linear forwards;
        }
        
        @keyframes fall {
            0% { transform: translateY(-5vh) rotate(0deg) scale(0.6); opacity: 0; }
            10% { opacity: 0.8; }
            100% { transform: translateY(100vh) rotate(360deg) scale(0.2); opacity: 0; }
        }
        
        /* é¼ æ ‡å…‰æ™•æ•ˆæœ */
        .cursor-glow {
            position: fixed;
            width: 200px;
            height: 200px;
            pointer-events: none;
            z-index: 1;
            background: radial-gradient(circle, rgba(100,150,255,0.2) 0%, rgba(100,150,255,0) 70%);
            opacity: 0.7;
            transform: translate(-50%, -50%);
            mix-blend-mode: screen;
            filter: blur(10px);
            transition: width 0.3s, height 0.3s;
        }
        
        /* ç…§ç‰‡ç‚¹å‡»ç¿»è½¬ç‰¹æ•ˆ */
        .photo.flipped .photo-front {
            transform: rotateY(180deg);
        }
        
        .photo.flipped .photo-back {
            transform: rotateY(0deg);
        }
        
        /* æ”¹è¿›ç…§ç‰‡æ­£é¢å’ŒèƒŒé¢çš„è¿‡æ¸¡æ•ˆæœ */
        .photo-front, .photo-back {
            transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            backface-visibility: hidden;
        }
        
        /* æ·»åŠ ç…§ç‰‡é˜´å½±æŠ•å°„æ•ˆæœ */
        .photo::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 8px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
            opacity: 0.3;
            z-index: -1;
            transition: opacity 0.3s ease;
            transform: translateZ(-5px) rotateX(10deg);
        }
        
        .photo:hover::before {
            opacity: 0.5;
        }
        
        /* æ·»åŠ éŸ³ä¹æ’­æ”¾å™¨æ ·å¼ */
        #music-player {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 100;
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(0, 0, 0, 0.5);
            padding: 10px 15px;
            border-radius: 30px;
            opacity: 0.4;
            transition: opacity 0.3s;
            backdrop-filter: blur(5px);
        }
        
        #music-player:hover {
            opacity: 1;
        }
        
        #music-player button {
            background: none;
            border: none;
            color: white;
            font-size: 16px;
            cursor: pointer;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            transition: all 0.3s;
        }
        
        #music-player button:hover {
            background: rgba(255, 255, 255, 0.4);
            transform: scale(1.1);
        }
        
        #song-info {
            color: white;
            font-size: 12px;
            text-shadow: 0 1px 3px rgba(0, 0, 0, 0.8);
        }
        
        /* å…¨æ™¯æ¨¡å¼åˆ‡æ¢æŒ‰é’® */
        #panorama-toggle {
            position: fixed;
            top: 20px;
            left: 20px;
            color: white;
            background: rgba(0, 0, 0, 0.5);
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            z-index: 100;
            opacity: 0.6;
            transition: all 0.3s;
            backdrop-filter: blur(5px);
        }
        
        #panorama-toggle:hover {
            opacity: 1;
            transform: scale(1.05);
        }
        
        /* å…¨æ™¯æ¨¡å¼ */
        body.panorama-mode {
            background: linear-gradient(to bottom, #001220, #003);
        }
        
        body.panorama-mode .star {
            opacity: 0.8 !important;
        }
        
        /* äº¤äº’å¼å·¥å…·æ  */
        #toolbar {
            position: fixed;
            bottom: 80px;
            right: 20px; /* æ”¹ä¸ºå³ä¾§ï¼Œä¸å†éœ€è¦å±…ä¸­ */
            transform: none; /* ç§»é™¤ä¸­å¿ƒå¯¹é½å˜æ¢ */
            display: flex;
            gap: 10px;
            background: rgba(0, 0, 0, 0.5);
            padding: 10px;
            border-radius: 30px;
            opacity: 0.4;
            transition: opacity 0.3s;
            z-index: 100;
            backdrop-filter: blur(5px);
        }
        
        #toolbar:hover {
            opacity: 1;
        }
        
        .toolbar-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
        }
        
        .toolbar-btn:hover {
            background: rgba(255, 255, 255, 0.4);
            transform: scale(1.1);
        }
        
        /* æ·»åŠ å·¥å…·æç¤º */
        .tooltip {
            position: relative;
        }
        
        .tooltip:hover::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            padding: 5px 10px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            border-radius: 5px;
            font-size: 12px;
            white-space: nowrap;
            margin-bottom: 5px;
        }

        /* Keyframes for album entrance animation */
        @keyframes fadeInAlbum {
            from {
                opacity: 0;
                transform: scale(0.95) rotateX(var(--initial-rotate-x, -10deg)); /* Maintain initial rotation if possible */
            }
            to {
                opacity: 1;
                transform: scale(1) rotateX(var(--initial-rotate-x, -10deg)); /* Maintain initial rotation if possible */
            }
        }

        /* Style for the love timer */
        #love-timer {
            position: fixed;
            top: 155px; /* Adjusted to be below a 3-line title */
            left: 50%;
            transform: translateX(-50%);
            color: white;
            font-size: 16px;
            font-weight: 300;
            text-shadow: 0 0 8px rgba(255, 107, 149, 0.6), 0 0 15px rgba(255, 107, 149, 0.4); /* Pinkish glow */
            z-index: 100;
            text-align: center;
            line-height: 1.5;
            width: 100%;
            max-width: 90vw;
            margin: 0 auto;
            opacity: 0; /* Initially hidden, will be faded in by JS */
            transition: opacity 0.5s ease-in-out;
        }
    </style>
</head>
<body>
<!-- ä¸»ç›¸å†Œå®¹å™¨ -->
<div id="box">
    <!-- åœ°é¢åå°„æ•ˆæœ -->
    <div id="reflection"></div>
</div>

<!-- ç›¸å†Œæ ‡é¢˜ -->
<h1 id="album-title">2022.10.02 åˆæ¬¡é‡è§ ğŸ’‘ï¼Œæ€¦ç„¶å¿ƒåŠ¨è‡ªæ­¤å¼€å§‹<br>2022.12.07 ç‰µä½ ä¹‹æ‰‹ ğŸ’Œï¼Œå°†ä½™ç”Ÿäº¤ä»˜ä¸ä½ <br>æˆ‘çš„æ‹çˆ±è„‘ï¼Œåªä¸ºä½ è€Œè·³åŠ¨ï¼Œæœæœæš®æš®ï¼Œçš†æ˜¯æ¬¢å–œ ğŸŒ¸</h1>

<!-- Love Timer Display -->
<div id="love-timer"></div>

<!-- æ§åˆ¶é¢æ¿ -->
<div id="controls">
    <button class="control-btn" id="rotate-left">â†</button>
    <button class="control-btn" id="auto-rotate">â–¶</button>
    <button class="control-btn" id="rotate-right">â†’</button>
    <button class="control-btn" id="zoom-in">+</button>
    <button class="control-btn" id="zoom-out">âˆ’</button>
</div>

<!-- èƒŒæ™¯æ˜Ÿæ˜Ÿç‰¹æ•ˆ -->
<div class="stars" id="stars"></div>

<!-- å…¨å±æŸ¥çœ‹ç…§ç‰‡çš„é®ç½©å±‚ -->
<div id="overlay">
    <button id="close-button">Ã—</button>
    <img id="overlay-image" src="" alt="Enlarged photo">
</div>

<!-- éŸ³ä¹æ’­æ”¾å™¨ -->
<div id="music-player">
    <button id="play-pause">â–¶</button>
    <div id="song-info">ç‚¹å‡»æ’­æ”¾éŸ³ä¹</div>
</div>

<!-- å…¨æ™¯æ¨¡å¼åˆ‡æ¢ -->
<button id="panorama-toggle" class="tooltip" data-tooltip="åˆ‡æ¢å…¨æ™¯æ¨¡å¼">å…¨æ™¯æ¨¡å¼</button>

<!-- å·¥å…·æ  -->
<div id="toolbar">
    <button class="toolbar-btn tooltip" id="toggle-blossom" data-tooltip="æ¨±èŠ±æ•ˆæœå·²å¼€å¯">ğŸŒ¸</button>
</div>

<!-- é¼ æ ‡å…‰æ™• -->
<div class="cursor-glow"></div>

<script>
// é¡µé¢åŠ è½½åå»¶è¿Ÿåˆå§‹åŒ–ï¼Œç¡®ä¿DOMå®Œå…¨å°±ç»ª
setTimeout(init, 100);

// åˆå§‹åŒ–å‡½æ•° - åˆ›å»º3Dç›¸å†Œå¹¶è®¾ç½®äº¤äº’
function init() {
    // è·å–DOMå…ƒç´ å¼•ç”¨
    const obox = document.getElementById('box');
    const overlay = document.getElementById('overlay');
    const overlayImage = document.getElementById('overlay-image');
    const closeButton = document.getElementById('close-button');
    
    // è·å–æ§åˆ¶æŒ‰é’®å¼•ç”¨
    const autoRotateBtn = document.getElementById('auto-rotate');
    const rotateLeftBtn = document.getElementById('rotate-left');
    const rotateRightBtn = document.getElementById('rotate-right');
    const zoomInBtn = document.getElementById('zoom-in');
    const zoomOutBtn = document.getElementById('zoom-out');
    
    // æƒ…ä¾£é—´ç”œèœœçŸ­å¥æ•°ç»„
    const sweetPhrases = [
        "æ­¤ç”Ÿå”¯ä½ ä¸€äºº ğŸ’‘ï¼Œæ„¿ä¸ä½ å…±åº¦æ¯ä¸€ä¸ªæ™¨æ˜",
        "çˆ±ä½ å¦‚åˆï¼Œæ¯ä¸ªæ—¥å‡ºéƒ½å› ä½ è€Œç’€ç’¨ ğŸ’•",
        "å¿ƒæœ‰çµçŠ€ï¼Œä¸€å¿µä¸€é¢¦çš†æ˜¯ä½  ğŸ’",
        "æ‰§å­ä¹‹æ‰‹ï¼Œæ¼«æ­¥æ—¶å…‰çš„æ¯ä¸€ç¨‹ ğŸ‘«",
        "ä¸ä½ å•è€ï¼Œç™½é¦–ä¸ç›¸ç¦» ğŸ‘´ğŸ‘µ",
        "æƒ…æ·±ä¼¼æµ·ï¼Œçˆ±æ„é•¿å­˜ ğŸ’˜",
        "ä¸ç¦»ä¸å¼ƒï¼Œæ˜¯æˆ‘ç»™ä½ çš„æ°¸æ’æ‰¿è¯º ğŸ”’",
        "ä½™ç”Ÿè¯·å¤šæŒ‡æ•™ï¼Œæ„¿ä¸ä½ å…±èµ´å±±æµ· ğŸŒ¹",
        "ä½ å¦‚æ˜Ÿå…‰ï¼Œç…§äº®æˆ‘å‰è¡Œçš„é“è·¯ âœ¨",
        "é™ªä½ åˆ°æ°¸è¿œï¼Œç›´åˆ°ä¸–ç•Œå°½å¤´ ğŸŒˆ",
        "å²æœˆé™å¥½ï¼Œåªå› æœ‰ä½ å®ˆå€™ â˜€ï¸",
        "æœ‰ä½ åœ¨ä¾§ï¼Œä¾¿æ˜¯æœ€ç¾å¥½çš„æ—¶å…‰ ğŸ’–",
        "ä¸€ç¬‘å€¾åŸï¼Œå€¾å°½æ‰€æœ‰åªä¸ºä½  ğŸ˜Š",
        "æºæ‰‹ç™½å¤´ï¼Œä¸è´Ÿæ­¤ç”Ÿä¸è´Ÿå¿ ğŸ¤",
        "æ¸©æŸ”å¦‚æ˜¥ï¼Œå²æœˆå› ä½ è€Œæ¸©æš– ğŸŒ¸",
        "äººç”Ÿå› ä½ ï¼Œå¤„å¤„éƒ½æ˜¯é£æ™¯ ğŸ€",
        "çœ¼é‡Œæ»¡æ˜¯ä½ ï¼Œå¿ƒä¸­å§‹ç»ˆæœ‰å…‰ ğŸ‘€",
        "çˆ±ä½ æˆä¹ æƒ¯ï¼Œæ¯ç§’é’Ÿéƒ½æƒ³ä½  ğŸ’“",
        "æ„¿å¾—ä¸€äººå¿ƒï¼Œç™½é¦–ä¸ç›¸ç¦» ğŸ’",
        "æ­¤ç”Ÿåªæ¢ï¼Œä¸æ¢ä½  ğŸ”„",
        "é‡è§ä½ ï¼Œæ˜¯æˆ‘æ­¤ç”Ÿæœ€ç¾çš„å¥‡è¿¹ ğŸ¯",
        "ä½ æ˜¯æˆ‘çš„å…¨éƒ¨ï¼Œæˆ‘çš„ä¸–ç•Œå› ä½ å®Œæ•´ ğŸŒ",
        "åªæ„¿ä¸ä½ ç›¸ä¼´ï¼Œæ­¥å±¥ä¸åœ ğŸƒâ€â™‚ï¸ğŸƒâ€â™€ï¸",
        "ä½ ç¬‘ä¾¿æ˜¯æ™´å¤©ï¼Œæ‰€æœ‰é˜´éœ¾çš†æ•£å» â˜”â†’â˜€ï¸",
        "ä½™ç”Ÿæœ‰ä½ ï¼Œè¶³ä»¥å®‰æ”¾ä¸€åˆ‡ ğŸ‘£",
        "çˆ±ä½ ï¼Œæ˜¯æˆ‘æœ€æ— æ‚”çš„éª„å‚² ğŸ†",
        "æ€å¿µå¦‚æ½®ï¼Œæ¯å¤©ä¸ºä½ è€Œç—´ ğŸ“…",
        "é™ªä½ åˆ°å¤©æ¶¯ï¼Œå†™å°½æµªæ¼«è¯—ç¯‡ ğŸ—ºï¸",
        "æ˜¥å¤ç§‹å†¬ï¼Œä¸ä½ å…±èµå››å­£æ›´è¿­ ğŸŒ¸â„ï¸",
        "å¿ƒä¸­åªæœ‰ä½ ï¼Œä¸–ç•Œä¸‡è±¡çš†é»¯ç„¶ ğŸ’—",
        "ä½ çš„åå­—ï¼Œæ—©å·²åˆ»åœ¨æˆ‘å¿ƒ âœï¸",
        "çˆ±ä½ ï¼Œä¸æ­¢ä¸¤ä¸‰å¤©ï¼Œè€Œæ˜¯æ°¸æ’ â±ï¸",
        "æ­¤ç”Ÿå®ˆå€™ï¼Œä¸æ›¾æ”¾æ‰‹ ğŸ¤²",
        "å› ä½ ç”Ÿå‘½ç»½æ”¾ï¼Œç’€ç’¨å¦‚ç”» ğŸ­",
        "ä½ æ˜¯æˆ‘æœ€ç¾çš„æ„å¤–ï¼Œä¹Ÿæ˜¯å”¯ä¸€çš„çè— ğŸ",
        "çˆ±æ— ç»ˆç‚¹ï¼Œå”¯ä½ æ˜¯å½’é€” ğŸ”„",
        "æˆ‘ä»¬çš„æ•…äº‹ï¼Œè¿˜åœ¨ç»­å†™æ¯ä¸€ç«  ğŸ“–",
        "çˆ±ä½ ï¼Œæ˜¯æˆ‘ä»Šç”Ÿæœ€å¤§çš„å¹¸ç¦ ğŸ˜",
        "ä½ æ˜¯æˆ‘å¿ƒåº•æœ€æ¸´æœ›çš„æœªæ¥ï¼Œä¹Ÿæ˜¯æ— é™å¯èƒ½ ğŸ”®",
        "520å¿«ä¹ï¼Œæˆ‘æ„¿ç”¨ä½™ç”Ÿè¯æ˜å¯¹ä½ çš„çˆ± ğŸŒ¹"
    ];
    
    // ç›¸å†Œé…ç½®å‚æ•°
    const photosCount = 49; // ç…§ç‰‡æ€»æ•°
    const layers = 3; // å‚ç›´å±‚æ•°
    const photosPerLayer = Math.ceil(photosCount / layers); // æ¯å±‚ç…§ç‰‡æ•°é‡
    const baseRadius = 360; // åŸºç¡€åŠå¾„ï¼Œå†³å®šç…§ç‰‡åˆ°ä¸­å¿ƒçš„è·ç¦»
    
    // åˆ›å»ºæ˜Ÿæ˜ŸèƒŒæ™¯
    createStars();
    
    // åˆ›å»ºæ¯å±‚ç…§ç‰‡å®¹å™¨åŠç…§ç‰‡
    for (let layer = 0; layer < layers; layer++) {
        // åˆ›å»ºå±‚å®¹å™¨
        const container = document.createElement('div');
        container.className = 'photo-container';
        
        // æ ¹æ®å±‚æ•°æ·»åŠ å¥‡å¶å±‚æ ·å¼ç±»
        if (layer % 2 === 0) {
            container.classList.add('layer-even');
        } else {
            container.classList.add('layer-odd');
        }
        
        // è®¾ç½®CSSå˜é‡ä»¥ä¾›åŠ¨ç”»ä½¿ç”¨
        const layerY = (layer - Math.floor(layers/2)) * 180;
        container.style.setProperty('--layer-y', `${layerY}px`);
        
        // åˆå§‹ä½ç½®è®¾ç½®
        container.style.transform = `translateY(${layerY}px)`;
        
        obox.appendChild(container);
        
        // è®¡ç®—å½“å‰å±‚çš„ç…§ç‰‡æ•°é‡ï¼Œé¿å…è§’åº¦å¤ªè¿‘
        const layerPhotoCount = Math.min(photosPerLayer, photosCount - (layer * photosPerLayer));
        
        // ä¸ºäº†æ›´å¥½çš„åˆ†å¸ƒï¼Œå¥‡æ•°å±‚å’Œå¶æ•°å±‚ç…§ç‰‡è§’åº¦åç§»é‡ä¸åŒ
        const angleRange = 360; // ç…§ç‰‡åˆ†å¸ƒåœ¨360åº¦èŒƒå›´å†…
        const angleStep = angleRange / layerPhotoCount; // å‡å°æ¯ä¸ªç…§ç‰‡ä¹‹é—´çš„è§’åº¦é—´éš”
        
        // ä¸ºå½“å‰å±‚åˆ›å»ºç…§ç‰‡
        for (let i = 0; i < layerPhotoCount; i++) {
            // è®¡ç®—æ­£é¢ç…§ç‰‡ç´¢å¼•
            const photoIndex = layer * photosPerLayer + i + 1;
            // è®¡ç®—èƒŒé¢ç…§ç‰‡ç´¢å¼•ï¼Œé”™å¼€ä¸€åŠç…§ç‰‡æ•°é‡
            const backPhotoIndex = (photoIndex + Math.floor(photosCount/2)) % photosCount || photosCount;
            
            // åˆ›å»ºç…§ç‰‡å®¹å™¨
            const photo = document.createElement('div');
            photo.className = 'photo';
            
            // åˆ›å»ºç…§ç‰‡æ­£é¢
            const photoFront = document.createElement('div');
            photoFront.className = 'photo-front';
            photoFront.style.background = `url(images/${photoIndex}.jpg) center/cover`;
            
            // åˆ›å»ºç…§ç‰‡èƒŒé¢
            const photoBack = document.createElement('div');
            photoBack.className = 'photo-back';
            photoBack.style.background = `url(images/${backPhotoIndex}.jpg) center/cover`;
            
            // æ·»åŠ ç…§ç‰‡æ ‡é¢˜ - æ­£é¢
            const titleFront = document.createElement('div');
            titleFront.className = 'photo-title';
            // ä½¿ç”¨ç”œèœœçŸ­å¥ä½œä¸ºæ ‡é¢˜ï¼Œç¡®ä¿ä¸è¶…å‡ºæ•°ç»„èŒƒå›´
            const phraseIndexFront = (photoIndex - 1) % sweetPhrases.length;
            titleFront.textContent = sweetPhrases[phraseIndexFront];
            photoFront.appendChild(titleFront);
            
            // æ·»åŠ ç…§ç‰‡æ ‡é¢˜ - èƒŒé¢
            const titleBack = document.createElement('div');
            titleBack.className = 'photo-title';
            // ä¸ºèƒŒé¢ç…§ç‰‡é€‰æ‹©ä¸åŒçš„çŸ­å¥
            const phraseIndexBack = (backPhotoIndex - 1) % sweetPhrases.length;
            titleBack.textContent = sweetPhrases[phraseIndexBack];
            photoBack.appendChild(titleBack);
            
            // å°†æ­£åé¢æ·»åŠ åˆ°ç…§ç‰‡å®¹å™¨
            photo.appendChild(photoFront);
            photo.appendChild(photoBack);
            
            // è®¡ç®—ç…§ç‰‡ä½ç½®
            // ä¸ºæ¯å±‚æ·»åŠ è§’åº¦åç§»ï¼Œé”™å¼€ä¸åŒå±‚çš„ç…§ç‰‡
            const offset = layer * (angleRange / layers); // æ ¹æ®æ–°çš„è§’åº¦èŒƒå›´è°ƒæ•´åç§»
            // è®¡ç®—è§’åº¦ï¼Œä½¿ç…§ç‰‡é›†ä¸­åœ¨æ­£å‰æ–¹ (-angleRange/2 åˆ° +angleRange/2)
            const angle = (i * angleStep) + offset - (angleRange / 2);
            // ä¸ºæ¯å±‚è®¾ç½®ä¸åŒåŠå¾„ï¼Œåˆ›é€ ç«‹ä½“æ„Ÿ
            const radius = baseRadius;
            
            // è®¾ç½®ç…§ç‰‡çš„3Då˜æ¢
            photo.style.transform = `rotateY(${angle}deg) translateZ(${radius}px)`;
            
            // å½»åº•ä¿®å¤æ‚¬åœé—®é¢˜ - å®Œå…¨ç¦ç”¨ç…§ç‰‡ä¸å±‚çš„åŠ¨ç”»è”åŠ¨
            photo.addEventListener('mouseenter', function() {
                // 1. ä¿å­˜å½“å‰ä¸–ç•Œåæ ‡ç³»ä¸­çš„ä½ç½®
                const rect = this.getBoundingClientRect();
                const worldX = rect.left + rect.width / 2;
                const worldY = rect.top + rect.height / 2;
                const worldZ = parseFloat(getComputedStyle(this).zIndex) || 0;
                
                // å°†ä½ç½®ä¿¡æ¯å­˜å‚¨åœ¨å…ƒç´ ä¸Š
                this.dataset.worldX = worldX;
                this.dataset.worldY = worldY;
                this.dataset.worldZ = worldZ;
                
                // 2. åœæ­¢æ‰€æœ‰åŠ¨ç”»å’Œå˜æ¢
                // ä¿å­˜åŸå§‹æ ·å¼ä»¥ä¾¿æ¢å¤
                this._originalTransform = this.style.transform;
                this._originalZIndex = this.style.zIndex;
                
                // åº”ç”¨è§†è§‰æ•ˆæœä½†ä¸æ”¹å˜ä½ç½®
                this.classList.add('photo-hover');
                
                // 3. é˜»æ­¢å®¹å™¨çš„åŠ¨ç”»å½±å“è¯¥ç…§ç‰‡
                // æ‰¾åˆ°çˆ¶å®¹å™¨å¹¶æš‚åœå®ƒçš„åŠ¨ç”»
                const container = this.parentElement;
                if (container && container.classList.contains('photo-container')) {
                    container.style.setProperty('--original-transform', container.style.transform || '');
                    this._parentOriginalAnimationState = container.style.animationPlayState;
                    container.style.animationPlayState = 'paused';
                }
                
                // 4. åœæ­¢è¯¥ç…§ç‰‡è‡ªèº«çš„åŠ¨ç”»
                this.style.animationPlayState = 'paused';
                
                // 5. å¢åŠ è§†è§‰åé¦ˆä½†ä¸æ”¹å˜ä½ç½®
                this.style.zIndex = "200"; // ç¡®ä¿æ˜¾ç¤ºåœ¨æœ€å‰
            });
            
            photo.addEventListener('mouseleave', function() {
                // ç§»é™¤æ‚¬åœæ ·å¼
                this.classList.remove('photo-hover');
                
                // æ¢å¤åŸå§‹æ ·å¼
                if (this._originalTransform) {
                    this.style.transform = this._originalTransform;
                }
                
                if (this._originalZIndex) {
                    this.style.zIndex = this._originalZIndex;
                }
                
                // æ¢å¤çˆ¶å®¹å™¨åŠ¨ç”»
                const container = this.parentElement;
                if (container && container.classList.contains('photo-container')) {
                    if (this._parentOriginalAnimationState) {
                        container.style.animationPlayState = this._parentOriginalAnimationState;
                    }
                }
                
                // æ¢å¤è‡ªèº«åŠ¨ç”»
                this.style.animationPlayState = '';
                
                // æ¸…é™¤ä¿å­˜çš„ä½ç½®æ•°æ®
                delete this.dataset.worldX;
                delete this.dataset.worldY;
                delete this.dataset.worldZ;
            });
            
            // æ·»åŠ é”™å¼€çš„åŠ¨ç”»å»¶è¿Ÿï¼Œåˆ›é€ çº§è”æ•ˆæœ
            const delay = (layerPhotoCount - i) * 0.1 + layer * 0.3;
            photo.style.transition = `transform 1s ${delay}s cubic-bezier(0.25, 1, 0.5, 1), 
                                    box-shadow 0.3s ease-out, filter 0.3s ease`;
            
            // ä¸ºæ­£é¢ç…§ç‰‡æ·»åŠ ç‚¹å‡»äº‹ä»¶
            photoFront.addEventListener('click', function() {
                overlayImage.src = `images/${photoIndex}.jpg`;
                overlay.classList.add('active');
            });
            
            // ä¸ºèƒŒé¢ç…§ç‰‡æ·»åŠ ç‚¹å‡»äº‹ä»¶
            photoBack.addEventListener('click', function() {
                overlayImage.src = `images/${backPhotoIndex}.jpg`;
                overlay.classList.add('active');
            });
            
            // å°†ç…§ç‰‡æ·»åŠ åˆ°å±‚å®¹å™¨
            container.appendChild(photo);
            
            // ä¸ºå›¾ç‰‡åŠ è½½å¤±è´¥æ·»åŠ é”™è¯¯å¤„ç†
            const handleImageError = function(element, index) {
                const img = new Image();
                img.onerror = function() {
                    // å¦‚æœå›¾ç‰‡åŠ è½½å¤±è´¥ï¼Œä½¿ç”¨å½©è‰²èƒŒæ™¯å’Œæ–‡å­—æ›¿ä»£
                    element.style.background = ``;
                    element.style.backgroundColor = `hsl(${index * 15}, 60%, 40%)`;
                    // ä½¿ç”¨ç”œèœœçŸ­å¥æ›¿ä»£Photoæ–‡æœ¬
                    const phraseIndex = (index - 1) % sweetPhrases.length;
                    element.textContent = sweetPhrases[phraseIndex];
                    console.warn(`Image not found: images/${index}.jpg. Using fallback.`);
                };
                img.src = `images/${index}.jpg`;
            };
            
            // æ£€æŸ¥æ­£åé¢å›¾ç‰‡æ˜¯å¦å­˜åœ¨
            handleImageError(photoFront, photoIndex);
            handleImageError(photoBack, backPhotoIndex);
        }
    }
    
    // å…³é—­å…¨å±æŸ¥çœ‹ç…§ç‰‡
    closeButton.addEventListener('click', function() {
        overlay.classList.remove('active');
    });
    
    // ç‚¹å‡»é®ç½©å±‚ç©ºç™½åŒºåŸŸä¹Ÿå¯å…³é—­å…¨å±æŸ¥çœ‹
    overlay.addEventListener('click', function(e) {
        if (e.target === overlay) {
            overlay.classList.remove('active');
        }
    });

    // åˆå§‹åŒ–æ—‹è½¬å‚æ•°
    let tX = 0; // Yè½´æ—‹è½¬è§’åº¦
    let tY = 10; // Xè½´æ—‹è½¬è§’åº¦
    let desX = 0; // Xæ–¹å‘æƒ¯æ€§
    let desY = 0; // Yæ–¹å‘æƒ¯æ€§
    let mouseWheelIndex = 1000; // é¼ æ ‡æ»šè½®ç¼©æ”¾å€¼, è®¾ç½®ä¸ºå®šä¹‰çš„æœ€å°å€¼ä»¥å®ç°åˆå§‹"æœ€å°"æ»šè½®å€¼ (æœ€å¤§æ”¾å¤§)
    updatePerspective(); // åº”ç”¨åˆå§‹é€è§†è®¾ç½®
    let isAutoRotating = false; // è‡ªåŠ¨æ—‹è½¬çŠ¶æ€ - å·²æ”¹ä¸ºé»˜è®¤å…³é—­ï¼Œå› ä¸ºç°åœ¨æ¯å±‚ç‹¬ç«‹æ—‹è½¬

    // åŠ¨ç”»ç›¸å…³å˜é‡
    let autoRotateSpeed = 0.05; // è‡ªåŠ¨æ—‹è½¬é€Ÿåº¦
    let animationFrameId = null; // è‡ªåŠ¨æ—‹è½¬åŠ¨ç”»å¸§ID
    let inertiaFrameId = null; // æƒ¯æ€§åŠ¨ç”»å¸§ID
    
    // æš‚åœ/æ¢å¤å„å±‚ç‹¬ç«‹åŠ¨ç”»
    function toggleLayerAnimations(pause) {
        const containers = document.querySelectorAll('.photo-container');
        containers.forEach(container => {
            if (pause) {
                container.style.animationPlayState = 'paused';
            } else {
                container.style.animationPlayState = 'running';
            }
        });
    }

    // è‡ªåŠ¨æ—‹è½¬åŠŸèƒ½ - æ•´ä½“ç›¸å†Œæ—‹è½¬
    function startAutoRotation() {
        isAutoRotating = true;
        autoRotateBtn.textContent = 'âšâš'; // æš‚åœç¬¦å·
        
        // æš‚åœå„å±‚çš„ç‹¬ç«‹åŠ¨ç”»
        toggleLayerAnimations(true);
        
        if (animationFrameId) cancelAnimationFrame(animationFrameId);

        // ä½¿ç”¨requestAnimationFrameå®ç°å¹³æ»‘åŠ¨ç”»
        function autoRotateLoop() {
            tX += autoRotateSpeed;
            obox.style.transform = `rotateX(${-tY}deg) rotateY(${tX}deg)`;
            animationFrameId = requestAnimationFrame(autoRotateLoop);
        }
        autoRotateLoop();
    }

    // åœæ­¢è‡ªåŠ¨æ—‹è½¬
    function stopAutoRotation() {
        isAutoRotating = false;
        autoRotateBtn.textContent = 'â–¶'; // æ’­æ”¾ç¬¦å·
        
        // æ¢å¤å„å±‚çš„ç‹¬ç«‹åŠ¨ç”»
        toggleLayerAnimations(false);
        
        if (animationFrameId) {
            cancelAnimationFrame(animationFrameId);
            animationFrameId = null;
        }
    }
    
    // æ§åˆ¶æŒ‰é’®äº‹ä»¶å¤„ç†
    // è‡ªåŠ¨æ—‹è½¬åˆ‡æ¢
    autoRotateBtn.addEventListener('click', function() {
        if (isAutoRotating) {
            stopAutoRotation();
        } else {
            startAutoRotation();
        }
    });
    
    // å‘å·¦æ—‹è½¬
    rotateLeftBtn.addEventListener('click', function() {
        stopAutoRotation();
        tX -= 15;
        obox.style.transform = `rotateX(${-tY}deg) rotateY(${tX}deg)`;
    });
    
    // å‘å³æ—‹è½¬
    rotateRightBtn.addEventListener('click', function() {
        stopAutoRotation();
        tX += 15;
        obox.style.transform = `rotateX(${-tY}deg) rotateY(${tX}deg)`;
    });
    
    // æ”¾å¤§
    zoomInBtn.addEventListener('click', function() {
        mouseWheelIndex -= 50;
        updatePerspective();
    });
    
    // ç¼©å°
    zoomOutBtn.addEventListener('click', function() {
        mouseWheelIndex += 50;
        updatePerspective();
    });
    
    // æ›´æ–°é€è§†æ·±åº¦
    function updatePerspective() {
        // é™åˆ¶é€è§†å€¼èŒƒå›´
        const minPerspectiveOffset = -800;
        const maxPerspectiveOffset = 4000;
        
        if (mouseWheelIndex < minPerspectiveOffset) mouseWheelIndex = minPerspectiveOffset;
        if (mouseWheelIndex > maxPerspectiveOffset) mouseWheelIndex = maxPerspectiveOffset;
        
        document.body.style.perspective = (1000 + mouseWheelIndex) + "px";
    }

    // å¤„ç†é¼ æ ‡æ‹–åŠ¨æ—‹è½¬
    document.onmousedown = function(e) {
        // å¦‚æœé®ç½©å±‚æ´»è·ƒï¼Œä¸æ‰§è¡Œæ‹–åŠ¨
        if (overlay.classList.contains('active')) return;
        
        if (inertiaFrameId) cancelAnimationFrame(inertiaFrameId);
        stopAutoRotation();

        e = e || window.event;
        let sX = e.clientX;
        let sY = e.clientY;

        // é¼ æ ‡ç§»åŠ¨äº‹ä»¶
        document.onmousemove = function(ev) {
            ev = ev || window.event;
            const nX = ev.clientX;
            const nY = ev.clientY;

            // è®¡ç®—é¼ æ ‡ç§»åŠ¨è·ç¦»
            desX = nX - sX;
            desY = nY - sY;

            // åº”ç”¨æ—‹è½¬å˜åŒ–
            tX += desX * 0.12;
            tY += desY * 0.12;

            // é™åˆ¶Xè½´æ—‹è½¬èŒƒå›´ï¼Œé˜²æ­¢ç¿»è½¬è¿‡åº¦
            if (tY > 80) tY = 80;
            if (tY < -80) tY = -80;

            obox.style.transform = `rotateX(${-tY}deg) rotateY(${tX}deg)`;

            // æ›´æ–°åæ ‡
            sX = nX;
            sY = nY;
        };

        // é¼ æ ‡é‡Šæ”¾äº‹ä»¶
        document.onmouseup = function() {
            document.onmousemove = document.onmouseup = null;

            // æƒ¯æ€§æ•ˆæœ
            function inertiaLoop() {
                // å‡å°‘é€Ÿåº¦ï¼Œæ¨¡æ‹Ÿæ‘©æ“¦åŠ›
                desX *= 0.92;
                desY *= 0.92;
                tX += desX * 0.1;
                tY += desY * 0.1;

                // é™åˆ¶æ—‹è½¬èŒƒå›´
                if (tY > 80) tY = 80;
                if (tY < -80) tY = -80;

                obox.style.transform = `rotateX(${-tY}deg) rotateY(${tX}deg)`;

                // å½“é€Ÿåº¦è¶³å¤Ÿå°æ—¶åœæ­¢æƒ¯æ€§
                if (Math.abs(desX) < 0.5 && Math.abs(desY) < 0.5) {
                    cancelAnimationFrame(inertiaFrameId);
                } else {
                    inertiaFrameId = requestAnimationFrame(inertiaLoop);
                }
            }
            inertiaFrameId = requestAnimationFrame(inertiaLoop);
        };
        return false;
    };

    // å¤„ç†é¼ æ ‡æ»šè½®ç¼©æ”¾
    function handleMouseWheel(e) {
        e = e || window.event;
        // é˜»æ­¢é»˜è®¤æ»šåŠ¨è¡Œä¸º
        if (e.preventDefault) e.preventDefault();
        
        // æ ‡å‡†åŒ–æ»šè½®å¢é‡å€¼
        const delta = Math.max(-1, Math.min(1, (e.wheelDelta || -e.detail)));

        if (delta > 0) { // æ”¾å¤§
            mouseWheelIndex -= 30;
        } else { // ç¼©å°
            mouseWheelIndex += 40;
        }

        // æ›´æ–°é€è§†å€¼
        updatePerspective();
        return false;
    }

    // æ·»åŠ æ»šè½®äº‹ä»¶ç›‘å¬
    if (document.addEventListener) {
        document.addEventListener("mousewheel", handleMouseWheel, { passive: false });
        document.addEventListener("DOMMouseScroll", handleMouseWheel, { passive: false });
    } else {
        document.attachEvent("onmousewheel", handleMouseWheel);
    }

    // åº”ç”¨åˆå§‹æ—‹è½¬
    obox.style.transform = `rotateX(${-tY}deg) rotateY(${tX}deg)`;
    
    // æ·»åŠ é”®ç›˜æ§åˆ¶
    document.addEventListener('keydown', function(e) {
        // æ–¹å‘é”®æ§åˆ¶æ—‹è½¬
        if (e.key === 'ArrowLeft') rotateLeftBtn.click();
        if (e.key === 'ArrowRight') rotateRightBtn.click();
        
        // æ–¹å‘é”®æ§åˆ¶å€¾æ–œ
        if (e.key === 'ArrowUp') tY += 5;
        if (e.key === 'ArrowDown') tY -= 5;
        
        // é™åˆ¶å€¾æ–œèŒƒå›´
        if (tY > 80) tY = 80;
        if (tY < -80) tY = -80;
        
        // ç©ºæ ¼é”®åˆ‡æ¢è‡ªåŠ¨æ—‹è½¬
        if (e.key === ' ') autoRotateBtn.click();
        
        // ESCé”®å…³é—­å…¨å±æŸ¥çœ‹
        if (e.key === 'Escape' && overlay.classList.contains('active')) {
            overlay.classList.remove('active');
        }
        
        // åº”ç”¨å˜æ¢
        obox.style.transform = `rotateX(${-tY}deg) rotateY(${tX}deg)`;
    });
    
    // åˆå§‹æ—¶å„å±‚æ—‹è½¬åŠ¨ç”»å·²ç»å¯åŠ¨ï¼Œä¸éœ€è¦è°ƒç”¨startAutoRotation()
    
    // æ·»åŠ é¼ æ ‡ç§»åŠ¨å¿ƒå½¢ç‰¹æ•ˆ
    document.addEventListener('mousemove', createHeart);
    document.addEventListener('click', function(e) {
        // ç‚¹å‡»æ—¶åˆ›å»ºå¤šä¸ªçˆ±å¿ƒ
        for (let i = 0; i < 5; i++) {
            setTimeout(() => createHeart(e), i * 100);
        }
    });

    // æ·»åŠ é¼ æ ‡å…‰æ™•æ•ˆæœ
    const cursorGlow = document.querySelector('.cursor-glow');
    document.addEventListener('mousemove', (e) => {
        cursorGlow.style.left = `${e.clientX}px`;
        cursorGlow.style.top = `${e.clientY}px`;
    });
    
    // æ·»åŠ ç…§ç‰‡ç‚¹å‡»ç¿»è½¬æ•ˆæœ
    document.querySelectorAll('.photo').forEach(photo => {
        photo.addEventListener('dblclick', function(e) {
            // é˜²æ­¢è§¦å‘å•å‡»äº‹ä»¶çš„è¡Œä¸º
            e.stopPropagation();
            
            // æ·»åŠ /ç§»é™¤ç¿»è½¬ç±»
            this.classList.toggle('flipped');
            
            // æ’­æ”¾ç¿»è½¬éŸ³æ•ˆ
            playSound('flip');
        });
    });
    
    // æ·»åŠ æ¨±èŠ±é£˜è½æ•ˆæœ
    let blossomActive = true; // é»˜è®¤å¼€å¯
    let blossomInterval;
    
    function toggleBlossom() {
        blossomActive = !blossomActive;
        
        if (blossomActive) {
            document.getElementById('toggle-blossom').setAttribute('data-tooltip', 'æ¨±èŠ±æ•ˆæœå·²å¼€å¯');
            startBlossom();
        } else {
            document.getElementById('toggle-blossom').setAttribute('data-tooltip', 'æ¨±èŠ±æ•ˆæœå·²å…³é—­');
            stopBlossom();
        }
    }
    
    function startBlossom() {
        if (!blossomInterval) {
            blossomInterval = setInterval(createBlossom, 300);
        }
    }
    
    function stopBlossom() {
        if (blossomInterval) {
            clearInterval(blossomInterval);
            blossomInterval = null;
        }
    }
    
    // æ¢å¤createBlossomå‡½æ•°ï¼Œè¿™æ˜¯å®é™…åˆ›å»ºæ¨±èŠ±ç‰¹æ•ˆçš„æ ¸å¿ƒå‡½æ•°
    function createBlossom() {
        const blossom = document.createElement('div');
        blossom.className = 'cherry-blossom';
        
        // éšæœºä½ç½®å’Œå¤§å°
        const size = 10 + Math.random() * 15;
        const left = Math.random() * window.innerWidth;
        
        blossom.style.left = `${left}px`;
        blossom.style.width = `${size}px`;
        blossom.style.height = `${size}px`;
        
        // éšæœºæ—‹è½¬å’Œé€Ÿåº¦
        const duration = 7 + Math.random() * 7;
        blossom.style.animation = `fall ${duration}s linear forwards`;
        
        // éšæœºé¢œè‰²å˜åŒ–
        const hue = 350 + Math.random() * 20; // ç²‰è‰²è‰²è°ƒèŒƒå›´
        const saturation = 90 + Math.random() * 10;
        const lightness = 80 + Math.random() * 10;
        blossom.style.backgroundColor = `hsl(${hue}, ${saturation}%, ${lightness}%)`;
        
        document.body.appendChild(blossom);
        
        // åŠ¨ç”»ç»“æŸåç§»é™¤
        setTimeout(() => {
            blossom.remove();
        }, duration * 1000);
    }
    
    // æ·»åŠ æ¨±èŠ±æ•ˆæœæŒ‰é’®äº‹ä»¶ç›‘å¬
    document.getElementById('toggle-blossom').addEventListener('click', toggleBlossom);
    
    // æ·»åŠ éŸ³ä¹æ’­æ”¾åŠŸèƒ½
    const musicPlayer = document.getElementById('music-player');
    const playPauseBtn = document.getElementById('play-pause');
    const songInfo = document.getElementById('song-info');
    
    // æ­Œæ›²åˆ—è¡¨
    const songs = [
        { title: "äºˆä½ ç™¾å°æƒ…ä¹¦", url: "music/äºˆä½ ç™¾å°æƒ…ä¹¦.mp3" },
    ];
    
    // åˆ›å»ºéŸ³é¢‘å…ƒç´ 
    const audio = new Audio();
    audio.volume = 0.5;
    let currentSongIndex = 0;
    let isPlaying = false;
    
    // æ·»åŠ éŸ³é¢‘é”™è¯¯å¤„ç†
    audio.addEventListener('error', function(e) {
        console.error('éŸ³é¢‘åŠ è½½é”™è¯¯:', e);
        songInfo.textContent = 'éŸ³ä¹åŠ è½½å¤±è´¥ï¼Œå°è¯•ä¸‹ä¸€é¦–';
        // å°è¯•æ’­æ”¾ä¸‹ä¸€é¦–
        currentSongIndex = (currentSongIndex + 1) % songs.length;
        loadSong(currentSongIndex);
        audio.play().catch(err => {
            console.error('æ’­æ”¾å¤±è´¥:', err);
            songInfo.textContent = 'éŸ³ä¹æ’­æ”¾å¤±è´¥';
        });
    });
    
    // æ’­æ”¾/æš‚åœåŠŸèƒ½
    playPauseBtn.addEventListener('click', function() {
        if (isPlaying) {
            audio.pause();
            playPauseBtn.textContent = 'â–¶';
            isPlaying = false;
        } else {
            if (!audio.src && songs.length > 0) {
                loadSong(currentSongIndex);
            }
            audio.play()
                .then(() => {
                    playPauseBtn.textContent = 'âšâš';
                    isPlaying = true;
                    if (songs[currentSongIndex]) { // Update title on successful play
                        songInfo.textContent = songs[currentSongIndex].title;
                    }
                })
                .catch(err => {
                    console.error('æ’­æ”¾å¤±è´¥ (button click):', err);
                    songInfo.textContent = 'éŸ³ä¹æ’­æ”¾å¤±è´¥';
                    playPauseBtn.textContent = 'â–¶'; // Ensure button reflects error state
                    isPlaying = false;             // Ensure isPlaying reflects error state
                });
        }
    });
    
    function loadSong(index) {
        const song = songs[index];
        audio.src = song.url;
        songInfo.textContent = song.title;
    }
    
    // æ­Œæ›²ç»“æŸåè‡ªåŠ¨æ’­æ”¾ä¸‹ä¸€é¦–
    audio.addEventListener('ended', function() {
        currentSongIndex = (currentSongIndex + 1) % songs.length;
        loadSong(currentSongIndex);
        audio.play();
    });
    
    // è‡ªåŠ¨æ’­æ”¾èƒŒæ™¯éŸ³ä¹
    loadSong(currentSongIndex);
    audio.play().then(() => {
        isPlaying = true;
        playPauseBtn.textContent = 'âšâš';
        songInfo.textContent = songs[currentSongIndex].title;
        console.log("éŸ³ä¹å·²è‡ªåŠ¨æ’­æ”¾:", songs[currentSongIndex].title);
    }).catch(err => {
        console.error('è‡ªåŠ¨æ’­æ”¾å¤±è´¥ (initial attempt):', err);
        songInfo.textContent = 'ç‚¹å‡»æ’­æ”¾éŸ³ä¹';
        // isPlaying remains false, playPauseBtn text is implicitly 'â–¶'

        const playAfterInteractionHandler = () => {
            // Only attempt if audio is loaded, paused, and not already playing
            if (audio && audio.src && audio.paused && !isPlaying) {
                 console.log("ç”¨æˆ·é¦–æ¬¡äº¤äº’ï¼Œå°è¯•æ’­æ”¾éŸ³ä¹ã€‚");
                 audio.play().then(() => {
                     isPlaying = true;
                     playPauseBtn.textContent = 'âšâš';
                     if (songs[currentSongIndex]) {
                        songInfo.textContent = songs[currentSongIndex].title;
                     }
                     console.log("éŸ³ä¹åœ¨ç”¨æˆ·äº¤äº’åå¼€å§‹æ’­æ”¾:", songs[currentSongIndex].title);
                 }).catch(interactionErr => {
                     console.error('ç”¨æˆ·äº¤äº’åæ’­æ”¾å¤±è´¥:', interactionErr);
                     // songInfo might remain 'ç‚¹å‡»æ’­æ”¾éŸ³ä¹' or update to general failure
                     // Ensure button and state reflect this secondary failure
                     playPauseBtn.textContent = 'â–¶';
                     isPlaying = false;
                 });
            }
            // Remove listeners after the first interaction attempt to avoid multiple triggers.
            // User can use the play button thereafter if this attempt also fails.
            document.removeEventListener('click', playAfterInteractionHandler, { capture: true });
            document.removeEventListener('keydown', playAfterInteractionHandler, { capture: true });
            document.removeEventListener('touchstart', playAfterInteractionHandler, { capture: true });
        };

        console.log("è‡ªåŠ¨æ’­æ”¾å¤±è´¥ï¼Œå°†å°è¯•åœ¨é¦–æ¬¡ç”¨æˆ·äº¤äº’åæ’­æ”¾ã€‚");
        // Listen for the first interaction on the document
        document.addEventListener('click', playAfterInteractionHandler, { once: true, capture: true });
        document.addEventListener('keydown', playAfterInteractionHandler, { once: true, capture: true });
        document.addEventListener('touchstart', playAfterInteractionHandler, { once: true, capture: true });
    });
    
    // å…¨æ™¯æ¨¡å¼åˆ‡æ¢
    const panoramaToggle = document.getElementById('panorama-toggle');
    panoramaToggle.addEventListener('click', function() {
        document.body.classList.toggle('panorama-mode');
        if (document.body.classList.contains('panorama-mode')) {
            panoramaToggle.textContent = 'æ­£å¸¸æ¨¡å¼';
        } else {
            panoramaToggle.textContent = 'å…¨æ™¯æ¨¡å¼';
        }
    });
    
    // æ·»åŠ éŸ³æ•ˆåŠŸèƒ½
    const sounds = {
        flip: 'https://assets.mixkit.co/sfx/preview/mixkit-light-page-turn-1151.mp3',
        click: 'https://assets.mixkit.co/sfx/preview/mixkit-modern-click-box-check-1120.mp3'
    };
    
    function playSound(soundName) {
        if (sounds[soundName]) {
            const sound = new Audio(sounds[soundName]);
            sound.volume = 0.3;
            sound.play();
        }
    }
    
    // ä¸ºæ§åˆ¶æŒ‰é’®æ·»åŠ ç‚¹å‡»éŸ³æ•ˆ
    document.querySelectorAll('.control-btn, .toolbar-btn').forEach(btn => {
        btn.addEventListener('click', () => playSound('click'));
    });
    
    // è‡ªåŠ¨å¼€å¯æ¨±èŠ±æ•ˆæœ
    startBlossom();

    // ç¡®ä¿æ ‡é¢˜åŒæ­¥ï¼Œå¹¶åŒ…å«è¡¨æƒ…ç¬¦å·å’Œæ­£ç¡®çš„æ—¥æœŸæ ¼å¼
    document.getElementById('album-title').innerHTML = '2022.10.02 åˆæ¬¡é‡è§ ğŸ’‘ï¼Œæ€¦ç„¶å¿ƒåŠ¨è‡ªæ­¤å¼€å§‹<br>2022.12.07 ç‰µä½ ä¹‹æ‰‹ ğŸ’Œï¼Œå°†ä½™ç”Ÿäº¤ä»˜ä¸ä½ <br>æˆ‘çš„æ‹çˆ±è„‘ï¼Œåªä¸ºä½ è€Œè·³åŠ¨ï¼Œæœæœæš®æš®ï¼Œçš†æ˜¯æ¬¢å–œ ğŸŒ¸';

    // Start the love timer
    startLoveTimer();
}

// Function to start and update the love timer
function startLoveTimer() {
    const loveStartDate = new Date('2022-12-07T00:00:00');
    const timerElement = document.getElementById('love-timer');

    if (!timerElement) {
        console.error("Love timer element not found!");
        return;
    }
    
    // Make timer visible smoothly
    setTimeout(() => {
        timerElement.style.opacity = '1';
    }, 700); // Delay slightly more than album animation

    function updateTimer() {
        const now = new Date();
        let diff = now - loveStartDate;

        if (diff < 0) {
            timerElement.innerHTML = "ğŸ’– Our journey is about to begin! ğŸ’–";
            return;
        }

        const days = Math.floor(diff / (1000 * 60 * 60 * 24));
        diff -= days * (1000 * 60 * 60 * 24);

        const hours = Math.floor(diff / (1000 * 60 * 60));
        diff -= hours * (1000 * 60 * 60);

        const minutes = Math.floor(diff / (1000 * 60));
        diff -= minutes * (1000 * 60);

        const seconds = Math.floor(diff / 1000);

        timerElement.innerHTML = `ğŸ’‘ ç›¸çˆ±æ—¶å…‰: ${days}å¤© ${hours}å°æ—¶ ${minutes}åˆ†é’Ÿ ${seconds}ç§’ ğŸ’–`;
    }

    updateTimer(); // Initial call
    setInterval(updateTimer, 1000); // Update every second
}

// åˆ›å»ºæ˜Ÿæ˜ŸèƒŒæ™¯
function createStars() {
    const starsContainer = document.getElementById('stars');
    const starCount = 100;
    
    for (let i = 0; i < starCount; i++) {
        const star = document.createElement('div');
        star.className = 'star';
        
        // éšæœºä½ç½®
        const left = Math.random() * 100;
        const top = Math.random() * 100;
        
        // éšæœºå¤§å°
        const size = Math.random() * 4;
        
        // éšæœºåŠ¨ç”»å»¶è¿Ÿ
        const delay = Math.random() * 10;
        
        // éšæœºäº®åº¦
        const brightness = 0.5 + Math.random() * 0.5;
        
        star.style.left = `${left}%`;
        star.style.top = `${top}%`;
        star.style.width = `${size}px`;
        star.style.height = `${size}px`;
        star.style.animationDelay = `${delay}s`;
        star.style.opacity = 0;
        star.style.filter = `brightness(${brightness})`;
        
        starsContainer.appendChild(star);
    }
}

// åˆ›å»ºçˆ±å¿ƒçš„å‡½æ•°
function createHeart(e) {
    // åªåœ¨æœ‰ä¸€å®šå‡ ç‡æ—¶åˆ›å»ºçˆ±å¿ƒï¼Œé¿å…å¤ªå¯†é›†
    if (Math.random() > 0.2) return;
    
    // åˆ›å»ºçˆ±å¿ƒå…ƒç´ 
    const heart = document.createElement('div');
    heart.className = 'heart';
    
    // éšæœºé€‰æ‹©çˆ±å¿ƒé¢œè‰²
    const colorClasses = ['heart-pink', 'heart-purple', 'heart-blue', 'heart-cyan', 'heart-gold'];
    heart.classList.add(colorClasses[Math.floor(Math.random() * colorClasses.length)]);
    
    // è®¾ç½®çˆ±å¿ƒå†…å®¹ï¼Œä½¿ç”¨Unicodeçˆ±å¿ƒç¬¦å·
    const heartShapes = ['â™¥', 'â¤', 'â™¡', 'ğŸ’—', 'ğŸ’•', 'ğŸ’–', 'ğŸ’˜'];
    heart.innerHTML = heartShapes[Math.floor(Math.random() * heartShapes.length)];
    
    // è®¾ç½®çˆ±å¿ƒä½ç½®ä¸ºé¼ æ ‡ä½ç½®
    heart.style.left = `${e.clientX}px`;
    heart.style.top = `${e.clientY}px`;
    
    // éšæœºå¤§å°å˜åŒ–
    const size = 15 + Math.random() * 10;
    heart.style.fontSize = `${size}px`;
    
    // éšæœºåˆå§‹æ—‹è½¬è§’åº¦
    const initRotation = -20 + Math.random() * 40;
    heart.style.transform = `translate(-50%, -50%) rotate(${initRotation}deg)`;
    
    // æ·»åŠ åˆ°æ–‡æ¡£
    document.body.appendChild(heart);
    
    // åŠ¨ç”»å®Œæˆåç§»é™¤å…ƒç´ 
    heart.addEventListener('animationend', function() {
        heart.remove();
    });
}
</script>
</body>
</html>
